<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<head>
    <title>Mes Ruchers - BeeTrack</title>
    <meta name="description" content="Gestion de vos ruchers - BeeTrack">
</head>
<body>
    <div layout:fragment="content">
        <div class="dashboard-wrapper">
            <!-- En-tête de page moderne -->
            <div class="dashboard-hero">
                <div class="hero-content">
                    <div class="hero-text">
                        <h1 class="hero-title">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                                <circle cx="12" cy="10" r="3"/>
                            </svg>
                            Mes Ruchers
                        </h1>
                        <p class="hero-subtitle">
                            Gérez et organisez vos emplacements de ruches
                        </p>
                    </div>
                    <div class="hero-actions">
                        <button class="btn btn-light" onclick="location.reload()">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="23,4 23,10 17,10"/>
                                <polyline points="1,20 1,14 7,14"/>
                                <path d="M20.49 9A9 9 0 0 0 5.64 5.64l1.27 1.27m4.27 12.22l1.27 1.27A9 9 0 0 0 20.49 15"/>
                            </svg>
                            Actualiser
                        </button>
                        <a href="/ruchers/nouveau" th:href="@{/ruchers/nouveau}" class="btn btn-primary">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="12" y1="5" x2="12" y2="19"/>
                                <line x1="5" y1="12" x2="19" y2="12"/>
                            </svg>
                            Nouveau rucher
                        </a>
                </div>
                </div>
            </div>

            <!-- Statistiques principales -->
            <div class="stats-section">
                <div class="stats-grid">
                <!-- Total des ruchers -->
                    <div class="stat-card stat-primary">
                        <div class="stat-content">
                            <div class="stat-main">
                                <div class="stat-number" th:text="${totalRuchers ?: 0}">0</div>
                                <div class="stat-label">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                                        <circle cx="12" cy="10" r="3"/>
                                    </svg>
                                    Ruchers actifs
                        </div>
                    </div>
                            <div class="stat-icon">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                                    <circle cx="12" cy="10" r="3"/>
                                </svg>
                        </div>
                    </div>
                </div>

                <!-- Total des ruches -->
                    <div class="stat-card stat-success">
                        <div class="stat-content">
                            <div class="stat-main">
                                <div class="stat-number" th:text="${totalRuches ?: 0}">0</div>
                                <div class="stat-label">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <polygon points="12,2 2,7 12,12 22,7 12,2"/>
                                        <polyline points="2,17 12,22 22,17"/>
                                        <polyline points="2,12 12,17 22,12"/>
                                    </svg>
                                    Ruches totales
                        </div>
                    </div>
                            <div class="stat-icon">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polygon points="12,2 2,7 12,12 22,7 12,2"/>
                                    <polyline points="2,17 12,22 22,17"/>
                                    <polyline points="2,12 12,17 22,12"/>
                                </svg>
                        </div>
                    </div>
                </div>

                <!-- Emplacements géographiques -->
                    <div class="stat-card stat-info">
                        <div class="stat-content">
                            <div class="stat-main">
                                <div class="stat-number">2</div>
                                <div class="stat-label">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <circle cx="12" cy="12" r="10"/>
                                        <path d="M2 12h20"/>
                                        <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
                                    </svg>
                                    Régions couvertes
                        </div>
                    </div>
                            <div class="stat-icon">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"/>
                                    <path d="M2 12h20"/>
                                    <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
                                </svg>
                        </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Liste des ruchers -->
            <div class="content-section">
                <div class="section-header">
                    <h2 class="section-title">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                            <circle cx="12" cy="10" r="3"/>
                        </svg>
                        Liste des ruchers
                        </h2>
                    <p class="section-description">Gérez vos emplacements de ruches</p>
                </div>
                
                <div class="content-grid">
                    <div th:if="${ruchers != null && !#lists.isEmpty(ruchers)}" class="ruchers-list">
                        <div th:each="rucher : ${ruchers}" class="rucher-item">
                            <div class="rucher-info">
                                <div class="rucher-avatar">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                                        <circle cx="12" cy="10" r="3"/>
                                    </svg>
                                </div>
                                <div class="rucher-details">
                                    <div class="rucher-name" th:text="${rucher.nom}">Rucher Principal</div>
                                    <div class="rucher-location" th:text="${rucher.adresse ?: 'Adresse non définie'}">123 Rue des Abeilles</div>
                                </div>
                            </div>
                            <div class="rucher-status">
                                <div class="rucher-count" th:text="${rucher.nombreRuches != null ? rucher.nombreRuches + ' ruches' : 'N/A'}">5 ruches</div>
                                <div class="status-badge status-active">Actif</div>
                            </div>

                            <!-- Ruches de ce rucher -->
                            <div class="rucher-ruches" th:if="${ruches != null}">
                                <div class="rucher-ruches-header">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <polygon points="12,2 2,7 12,12 22,7 12,2"/>
                                        <polyline points="2,17 12,22 22,17"/>
                                        <polyline points="2,12 12,17 22,12"/>
                                    </svg>
                                    Ruches
                                </div>
                                <ul class="ruches-list">
                                    <li class="ruche-item" th:each="ruche : ${ruches.?[rucherId == rucher.id]}">
                                        <span class="ruche-name" th:text="${ruche.nom}">Ruche</span>
                                        <span class="badge" th:classappend="${ruche.actif} ? ' badge-success' : ' badge-warning'" th:text="${ruche.actif} ? 'Active' : 'Inactive'">Active</span>
                                    </li>
                                </ul>
                                <div class="empty-ruches" th:if="${#lists.isEmpty(ruches.?[rucherId == rucher.id])}">Aucune ruche dans ce rucher</div>
                            </div>
                        </div>
                    </div>
                    
                    <div th:if="${ruchers == null || #lists.isEmpty(ruchers)}" class="empty-state">
                        <div class="empty-icon">
                            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                                <circle cx="12" cy="10" r="3"/>
                            </svg>
                        </div>
                        <h4 class="empty-title">Aucun rucher</h4>
                        <p class="empty-description">Ajoutez votre premier rucher pour commencer</p>
                        <a href="/ruchers/nouveau" th:href="@{/ruchers/nouveau}" class="btn btn-primary">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="12" y1="5" x2="12" y2="19"/>
                                <line x1="5" y1="12" x2="19" y2="12"/>
                            </svg>
                            Ajouter un rucher
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html> 